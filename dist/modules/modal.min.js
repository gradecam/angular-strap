/**
 * angular-strap
 * @version v2.3.9 - 2020-01-29
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.modal',['mgcrea.ngStrap.core','mgcrea.ngStrap.helpers.dimensions']).provider('$modal',function(){var n=this.defaults={animation:'am-fade',backdropAnimation:'am-fade',customClass:'',prefixClass:'modal',prefixEvent:'modal',placement:'top',templateUrl:'modal/modal.tpl.html',template:'',contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0,size:null};this.$get=['$window','$rootScope','$bsCompiler','$animate','$timeout','$sce','dimensions',function(e,o,t,a,i,s,l){function r(e){function i(){A.$emit(E.prefixEvent+'.show',y),angular.isDefined(E.onShow)&&angular.isFunction(E.onShow)&&E.onShow(y)}function l(){A.$emit(E.prefixEvent+'.hide',y),angular.isDefined(E.onHide)&&angular.isFunction(E.onHide)&&E.onHide(y),m.removeClass(E.prefixClass+'-open'),E.animation&&m.removeClass(E.prefixClass+'-with-'+E.animation)}function r(){E.backdrop&&('static'!==E.backdrop&&(B.on('mousedown',k),F.on('mousedown',k)),B.on('click',C),F.on('click',C),F.on('wheel',S))}function w(){E.backdrop&&('static'!==E.backdrop&&(B.off('mousedown',k),F.off('mousedown',k)),B.off('click',C),F.off('click',C),F.off('wheel',S))}function b(){E.keyboard&&B.on('keyup',y.$onKeyUp)}function v(){E.keyboard&&B.off('keyup',y.$onKeyUp)}function k(n){n.target===n.currentTarget&&(U=!0)}function C(n){n.target===n.currentTarget&&('static'===E.backdrop?y.focus():U&&y.hide(),U=!1)}function S(n){n.preventDefault()}function x(){y.$isShown&&null!==B&&(w(),v()),z&&(z.$destroy(),z=null),B&&(B.remove(),B=y.$element=null)}var y={},E=y.$options=angular.extend({},n,e),D=y.$promise=t.compile(E),A=y.$scope=E.scope&&E.scope.$new()||o.$new();E.element||E.container||(E.container='body'),y.$id=E.id||E.element&&E.element.attr('id')||'',d(['title','content'],function(n){E[n]&&(A[n]=s.trustAsHtml(E[n]))}),A.$hide=function(){A.$$postDigest(function(){y.hide()})},A.$show=function(){A.$$postDigest(function(){y.show()})},A.$toggle=function(){A.$$postDigest(function(){y.toggle()})},y.$isShown=A.$isShown=!1;var H,B,z,U=!1,F=angular.element('<div class="'+E.prefixClass+'-backdrop"/>');return F.css({position:'fixed',top:'0px',left:'0px',bottom:'0px',right:'0px'}),D.then(function(n){H=n,y.init()}),y.init=function(){E.show&&A.$$postDigest(function(){y.show()})},y.destroy=function(){x(),F&&(F.remove(),F=null),A.$destroy()},y.show=function(){if(!y.$isShown){var n,e;if(angular.isElement(E.container)?(n=E.container,e=E.container[0].lastChild?angular.element(E.container[0].lastChild):null):E.container?(n=u(E.container),e=n[0]&&n[0].lastChild?angular.element(n[0].lastChild):null):(n=null,e=E.element),B&&x(),z=y.$scope.$new(),B=y.$element=H.link(z,function(n,e){}),E.backdrop&&(B.css({'z-index':h+20*p}),F.css({'z-index':$+20*p}),p++),!A.$emit(E.prefixEvent+'.show.before',y).defaultPrevented){angular.isDefined(E.onBeforeShow)&&angular.isFunction(E.onBeforeShow)&&E.onBeforeShow(y),B.css({display:'block'}).addClass(E.placement),E.customClass&&B.addClass(E.customClass),E.size&&g[E.size]&&angular.element(u('.modal-dialog',B[0])).addClass(g[E.size]),E.animation&&(E.backdrop&&F.addClass(E.backdropAnimation),B.addClass(E.animation)),E.backdrop&&a.enter(F,m,null),angular.version.minor<=2?a.enter(B,n,e,i):a.enter(B,n,e).then(i),y.$isShown=A.$isShown=!0,c(A);var o=B[0];f(function(){o.focus()}),m.addClass(E.prefixClass+'-open'),E.animation&&m.addClass(E.prefixClass+'-with-'+E.animation),r(),b()}}},y.hide=function(){y.$isShown&&(A.$emit(E.prefixEvent+'.hide.before',y).defaultPrevented||(angular.isDefined(E.onBeforeHide)&&angular.isFunction(E.onBeforeHide)&&E.onBeforeHide(y),angular.version.minor<=2?a.leave(B,l):a.leave(B).then(l),E.backdrop&&(p--,a.leave(F)),y.$isShown=A.$isShown=!1,c(A),w(),v()))},y.toggle=function(){y.$isShown?y.hide():y.show()},y.focus=function(){B[0].focus()},y.$onKeyUp=function(n){27===n.which&&y.$isShown&&(y.hide(),n.stopPropagation())},y}function c(n){n.$$phase||n.$root&&n.$root.$$phase||n.$digest()}function u(n,e){return angular.element((e||document).querySelectorAll(n))}var d=angular.forEach,f=e.requestAnimationFrame||e.setTimeout,m=angular.element(e.document.body),p=0,h=1050,$=1040,g={lg:'modal-lg',sm:'modal-sm'};return r}]}).directive('bsModal',['$window','$sce','$parse','$modal',function(n,e,o,t){return{restrict:'EAC',scope:!0,link:function(n,o,a,i){var s={scope:n,element:o,show:!1};angular.forEach(['template','templateUrl','controller','controllerAs','contentTemplate','placement','backdrop','keyboard','html','container','animation','backdropAnimation','id','prefixEvent','prefixClass','customClass','modalClass','size'],function(n){angular.isDefined(a[n])&&(s[n]=a[n])}),s.modalClass&&(s.customClass=s.modalClass);var l=/^(false|0|)$/i;angular.forEach(['backdrop','keyboard','html','container'],function(n){angular.isDefined(a[n])&&l.test(a[n])&&(s[n]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(e){var o='bs'+e.charAt(0).toUpperCase()+e.slice(1);angular.isDefined(a[o])&&(s[e]=n.$eval(a[o]))}),angular.forEach(['title','content'],function(o){a[o]&&a.$observe(o,function(t,a){n[o]=e.trustAsHtml(t)})}),a.bsModal&&n.$watch(a.bsModal,function(e,o){angular.isObject(e)?angular.extend(n,e):n.content=e},!0);var r=t(s);o.on(a.trigger||'click',r.toggle),n.$on('$destroy',function(){r&&r.destroy(),s=null,r=null})}}}]);
//# sourceMappingURL=modal.min.js.map
